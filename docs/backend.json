{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's public profile and metadata within the Z app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "nickname": {
          "type": "string",
          "description": "A unique nickname chosen by the user to identify themselves in the app."
        },
        "profilePictureUrl": {
          "type": "string",
          "description": "URL to the user's profile picture.",
          "format": "uri"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user profile was created.",
          "format": "date-time"
        },
        "followingUserIds": {
          "type": "array",
          "description": "References to UserProfiles this user is following. (Relationship: UserProfile N:N UserProfile)",
          "items": {
            "type": "string"
          }
        },
        "followerUserIds": {
          "type": "array",
          "description": "References to UserProfiles that are following this user. (Relationship: UserProfile N:N UserProfile)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "nickname",
        "createdAt"
      ]
    },
    "Post": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Post",
      "type": "object",
      "description": "Represents a user-generated content item, which can include various media types and captions.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Post entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the UserProfile who created the post. (Relationship: UserProfile 1:N Post)"
        },
        "caption": {
          "type": "string",
          "description": "The text caption for the post, potentially AI-generated."
        },
        "mediaUrls": {
          "type": "array",
          "description": "An array of URLs for images, videos, or documents associated with the post.",
          "items": {
            "type": "string"
          }
        },
        "mediaTypes": {
          "type": "array",
          "description": "An array of media types corresponding to `mediaUrls` (e.g., 'image', 'video', 'document').",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the post was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the post was last updated.",
          "format": "date-time"
        },
        "likedBy": {
          "type": "array",
          "description": "An array of user IDs who have liked the post.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userId",
        "mediaUrls",
        "mediaTypes",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The `userId` corresponds to the Firebase Authentication UID. Publicly readable for discovery, but writeable only by the owner.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user profile, matching the Firebase Authentication UID."
            }
          ]
        }
      },
      {
        "path": "/posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": {
            "$ref": "#/backend/entities/Post"
          },
          "description": "Contains user-generated posts. Each document includes the `userId` of the creator for ownership checks. All posts are publicly readable.",
          "params": [
            {
              "name": "postId",
              "description": "The unique identifier for the post."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is simplified to only include users and posts. Chat, messages, and likes have been removed. Authorization is handled via security rules, where users can only write to their own profile and posts."
  }
}
